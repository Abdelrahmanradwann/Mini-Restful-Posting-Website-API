---SIGN-UP

User write down his info

Check that everything needed was sent and not null

Check that email does not exist

Check the len of email and password and make sure they are in the right format
Trim them if necessary 
convert email to lowercase before saving

Num followers = num following = friend no = 0

No bio

if pic exists 
 1 -> store directly to the main object storage
 2 -> save user info in DB

if pic doesnot exist  then save directly to the DB

Before saving create token for this user for authentication and encrypt the password

NEW
// execute the todos
// need to make sure that the transaction of User and UserMetaData is atomic transactiom


---------------------------------------
LOG-in

User types email and password

get user by email

compare between the hashed pw and the typed pw

gen token for the User

return the token attached with the user

---------------------------------------

Note -> Id for posts will be userid + created at date
        Id for profile pic will be user emails
        

create post 

check that whether there is a content or media is true ( error if both pf them are empty )
check for existence if userid
created at for the current time
num comment = num likes = 0

flow of creating post
    if no video
        will upload the image ( if exists ) to the photo bucket and save posts info into DB
    
    if video    
        store video in the object store buffer
        store meta data of the video in the brokers ( producer )
        (maybe I will need to remove from the object store if needed)

-----------------------------------------------


forget password

1) send email
2) check if email exists in DB
3) send verification code and update it and update the time
4) send him an email for reset his pw

-----------------------

reset password

check for user with verification code and time < the time of code

if exists then update the password and hash it
and reset the vcode and time to undefined

-------------------------

get posts

validate token
get page number from url query (page = ?) by default will be page 1
get the posts from db and check if the is media then get the media from object store











